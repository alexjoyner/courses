{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["interface OrderState {\r\n    order: Order;\r\n\r\n    cancelOrder():void;\r\n    verifyPayment():void;\r\n    shipOrder():void;\r\n}\r\n\r\nclass Order {\r\n    public paymentPendingState: PaymentPendingState;\r\n    public cancelledOrderState: CancelledOrderState;\r\n    public orderBeingPreparedState: OrderBeingPreparedState;\r\n    public orderShippedState: OrderShippedState;\r\n    private currentState: OrderState;\r\n\r\n    constructor(){\r\n        this.paymentPendingState = new PaymentPendingState(this);\r\n        this.cancelledOrderState = new CancelledOrderState(this);\r\n        this.orderBeingPreparedState = new OrderBeingPreparedState(this);\r\n        this.orderShippedState = new OrderShippedState(this);\r\n\r\n        this.currentState = this.paymentPendingState;\r\n    }\r\n    public setState(state: OrderState){\r\n        this.currentState = state;\r\n    }\r\n    public getCurrentState():OrderState{\r\n        return this.currentState;\r\n    }\r\n}\r\n\r\nclass CancelledOrderState implements OrderState {\r\n    order: Order;\r\n\r\n    constructor(order: Order) {\r\n        this.order = order;\r\n    }\r\n\r\n    public cancelOrder() {\r\n        console.log('This order is already cancelled');\r\n        this.order.setState(this.order.cancelledOrderState);\r\n    }\r\n\r\n    public verifyPayment() {\r\n        console.log('The order is cancelled, you cannot pay anymore.');\r\n    }\r\n\r\n    public shipOrder() {\r\n        console.log('The order is cancelled, you cannot ship it anymore.');\r\n    }\r\n}\r\n\r\nclass PaymentPendingState implements OrderState {\r\n    order: Order;\r\n\r\n    constructor(order: Order) {\r\n        this.order = order;\r\n    }\r\n\r\n    cancelOrder() {\r\n        console.log('Cancelling your unpaid order...');\r\n        this.order.setState(this.order.cancelledOrderState);\r\n    }\r\n\r\n    verifyPayment() {\r\n        console.log('Payment verified! Shipping soon.');\r\n        this.order.setState(this.order.orderBeingPreparedState);\r\n    }\r\n    shipOrder() {\r\n        console.log('Cannot ship order when payment is pending!');\r\n    }\r\n}\r\n\r\nclass OrderBeingPreparedState implements OrderState {\r\n    order: Order;\r\n\r\n    constructor(order: Order) {\r\n        this.order = order;\r\n    }\r\n\r\n    cancelOrder() {\r\n        console.log('Cancelling your order.. You will be refunded.');\r\n        this.order.setState(this.order.cancelledOrderState);\r\n    }\r\n    verifyPayment() {\r\n        console.log('Payment is already verified.');\r\n    }\r\n    shipOrder() {\r\n        console.log('Shipping your order now..');\r\n        this.order.setState(this.order.orderShippedState);\r\n    }\r\n}\r\n\r\nclass OrderShippedState implements OrderState {\r\n    order: Order;\r\n\r\n    constructor(order: Order) {\r\n        this.order = order;\r\n    }\r\n\r\n    cancelOrder() {\r\n        console.log('You cannot cancel an order that has been shipped.');\r\n    }\r\n    verifyPayment() {\r\n        console.log('Payment is already verified');\r\n    }\r\n    shipOrder() {\r\n        console.log('Order is already shipped');\r\n    }\r\n}\r\n\r\nlet order = new Order();\r\n\r\norder.getCurrentState().verifyPayment();\r\norder.getCurrentState().shipOrder();\r\norder.getCurrentState().cancelOrder();\r\n\r\nconsole.log('Order state: ' + (<any> order.getCurrentState()).constructor.name);"]}